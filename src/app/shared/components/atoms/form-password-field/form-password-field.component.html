<div class="relative py-1">
    <div [formGroup]="formGroup">
        <input
            [style]="{ width: '100%' }"
            type="password"
            [id]="fieldName"
            [type]="isPasswordVisible ? 'text' : 'password'"
            [formControlName]="fieldName"
            [ngClass]="classFilled"
            class="valid"
            [placeholder]="label" />
        <button
            type="button"
            (click)="togglePasswordVisibility()"
            class="absolute top-1 end-0 p-3.5 rounded-e-md">
            @if (isPasswordVisible) {
                <svg-icon [src]="iconEyeOpen" />
            } @else {
                <svg-icon [src]="iconEyeClose" />
            }
        </button>
    </div>
    @if (isInvalid) {
        @if (!isValidLength && !hasUpperCase && !hasLowerCase && !hasNumeric && !hasSpecialChar) {
            <p class="errors-message">{{ errorMessage }}</p>
        } @else {
            @if (errorMessage.includes('Passwords do not match')) {
                <p class="errors-message">{{ errorMessage }}</p>
            } @else {
                <div class="absolute z-10 w-full p-4 bg-gray-100 rounded-lg dark:bg-neutral-950">
                    <h4 class="mt-3 text-sm font-semibold text-gray-800 dark:text-white">
                        Your password must contain:
                    </h4>

                    <ul class="space-y-1 text-sm text-gray-500 dark:text-neutral-500">
                        <li
                            class="flex items-center hs-strong-password-active:text-teal-500 gap-x-2">
                            @if (isValidLength) {
                                <svg-icon [src]="iconChecklist" />
                            } @else {
                                <svg-icon [src]="iconClose" />
                            }
                            Minimum number of characters is 6.
                        </li>
                        <li
                            class="flex items-center hs-strong-password-active:text-teal-500 gap-x-2">
                            @if (hasUpperCase) {
                                <svg-icon [src]="iconChecklist" />
                            } @else {
                                <svg-icon [src]="iconClose" />
                            }
                            Should contain uppercase.
                        </li>
                        <li
                            class="flex items-center hs-strong-password-active:text-teal-500 gap-x-2">
                            @if (hasLowerCase) {
                                <svg-icon [src]="iconChecklist" />
                            } @else {
                                <svg-icon [src]="iconClose" />
                            }
                            Should contain lowercase.
                        </li>
                        <li
                            class="flex items-center hs-strong-password-active:text-teal-500 gap-x-2">
                            @if (hasNumeric) {
                                <svg-icon [src]="iconChecklist" />
                            } @else {
                                <svg-icon [src]="iconClose" />
                            }
                            Should contain numbers.
                        </li>
                        <li
                            class="flex items-center hs-strong-password-active:text-teal-500 gap-x-2">
                            @if (hasSpecialChar) {
                                <svg-icon [src]="iconChecklist" />
                            } @else {
                                <svg-icon [src]="iconClose" />
                            }
                            Should contain special characters.
                        </li>
                    </ul>
                </div>
            }
        }
    }
</div>
